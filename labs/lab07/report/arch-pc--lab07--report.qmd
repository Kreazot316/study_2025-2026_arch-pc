---
## Author
author:
  name: Карпухин Клим
  email: 1032255580@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе No7"
subtitle: "Команды безусловного и условного переходов в NASM. Программирование ветвлений."
license: "CC BY"
---

# Цель работы

Цель данной лабораторной работы --- изучение команд условного и безусловного переходов. Приобретение навыков написания программ с использованием переходов. Знакомство с назначением и структурой файла листинга.

# Выполнение лабораторной работы

## Реализация переходов в NASM

Создал каталог для программ лабораторной работы №7, перешёл в него и создал файл lab7-1.asm ([рис. @fig-001]).

![Создание каталога для программ лабораторной работы №7, переход в него и создание файла lab7-1.asm](image/1.jpg){#fig-001 width=70%}

Ввёл в файл lab7-1.asm текст программы из листинга 7.1. ([рис. @fig-002]).

![Введённый текст программы](image/2.jpg){#fig-002 width=70%}

Создал исполняемый файл и запустил его ([рис. @fig-003]).

![Создание и запуск исполняемого файла](image/3.jpg){#fig-003 width=70%}

Изменил текст программы в соответствии с листингом 7.2. ([рис. @fig-004]).

![Изменённый текст программы](image/4.jpg){#fig-004 width=70%}

Создал исполняемый файл и проверил его работу ([рис. @fig-005]).

![Создание и запуск исполняемого файла](image/5.jpg){#fig-005 width=70%}

Изменил текст программы, чтобы вывод программы был следующим: Сообщение №3, Сообщение №2, Сообщение №1 ([рис. @fig-006]).

![Изменённый текст программы](image/6.jpg){#fig-006 width=70%}

Создал исполняемый файл и запустил его ([рис. @fig-007]).

![Создание и запуск исполняемого файла](image/7.jpg){#fig-007 width=70%}

Создал файл lab7-2.asm в каталоге ~/work/arch-pc/lab07 и ввёл в него текст программы из листинга 7.3. ([рис. @fig-008]).

![Введённый текст программы](image/8.jpg){#fig-008 width=70%}

Создал исполняемый файл и проверил его работу для разных значений B ([рис. @fig-009]).

![Создание и проверка работы исполняемого файла](image/9.jpg){#fig-009 width=70%}

## Изучение структуры файла листинга

Создал файл листинга для программы из файла lab7-2.asm ([рис. @fig-010]).

![Создание файла листинга для программы из файла lab7-2.asm](image/10.jpg){#fig-010 width=70%}

Открыл файл листинга lab7-2.asm с помощью mcedit ([рис. @fig-011]).

![Файл листинга](image/11.jpg){#fig-011 width=70%}

*Объяснение содержимого строки 4:*

Строка 4 00000000 53 <1> push ebx
4 — номер строки листинга.
00000000 — адрес (смещение) инструкции в коде.
53 — машинные байты этой инструкции.
<1> — служебный маркер/фрагмент в листинге.
push ebx — Я: сохраняю текущее значение регистра EBX в стеке, чтобы потом можно было безопасно использовать EBX в функции и восстановить его перед возвратом.

*Объяснение содержимого строки 5:*

Строка 5 00000001 89C3 <1> mov ebx, eax
5 — номер строки листинга.
00000001 — адрес (смещение) инструкции.
89C3 — машинные байты инструкции.
<1> — служебный маркер/фрагмент.
mov ebx, eax — Я: копирую значение из регистра EAX в EBX (обычно чтобы сохранить указатель или значение, которое было в EAX, в более "долговременный" регистр).

*Объяснение содержимого строки 9:*

Строка 9 00000003 803800 <1> cmp byte [eax], 0
9 — номер строки листинга.
00000003 — адрес (смещение) инструкции.
803800 — машинные байты (opcode + модификаторы + immediate).
<1> — служебный маркер/фрагмент.
cmp byte [eax], 0 — Я: сравниваю один байт по адресу в EAX с нулём — обычно это проверка на конец C-строки ('\0'); если байт равен нулю, значит конец строки.

Открыл файл с программой lab7-2.asm и удалил операнд [A] из инструкции mov ecx,[A]  ([рис. @fig-012]).

![Текст программы lab7-2.asm c удалённым операндом](image/12.jpg){#fig-012 width=70%}

Выполнил трансляцию с получением файла листинга ([рис. @fig-013]).

![Выполнение трансляции с получением файла листинга](image/13.jpg){#fig-013 width=70%}

Объектный файл `lab7-2.o` не создаётся, так как в программе обнаружена синтаксическая ошибка.

Файл листинга `lab7-2.lst` создаётся, для ошибочной строки добавляется диагностическое сообщение.

## Задание для самостоятельной работы

### Задание 1. Нахождение наименьшей из трёх целочисленных переменных

Вариант 1:
a = 17, b = 23, c = 45

Написал программу нахождения наименьшей из 3 целочисленных переменных a, b и c ([рис. @fig-014]).

![Текст программы нахождения наименьшей из 3 целочисленных переменных a, b и c](image/14.jpg){#fig-014 width=70%}

Создал исполняемый файл и проверил его работу ([рис. @fig-015]).

![Создание и проверка работы исполняемого файла](image/15.jpg){#fig-015 width=70%}

### Задание 2. Вычисление функции f(x)

Вариант 1:

$$
f(x) =
\begin{cases}
2a-x, & x > a, \\
8, & x \ge a.
\end{cases}
$$

Программа запрашивает с клавиатуры значения x и a, вычисляет f(x) по формуле и выводит результат.

Написал программу, которая для введённых с клавиатуры значений x и a вычисляет значение заданной функции f(x) и выводит результат вычислений ([рис. @fig-016]).

![Текст программы вычисления значения заданной функции f(x)](image/16.jpg){#fig-016 width=70%}

Создал исполняемый файл и проверил его работу  ([рис. @fig-017]).

![Создание и проверка работы исполняемого файла](image/17.jpg){#fig-017 width=70%}

# Выводы

Я изучил команды условного и безусловного переходов. Приобрёл навыки написания программ с использованием переходов. Познакомился с назначением и структурой файла листинга.
